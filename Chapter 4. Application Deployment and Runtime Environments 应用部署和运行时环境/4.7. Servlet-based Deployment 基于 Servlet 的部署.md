4.7. Servlet-based Deployment 基于 Servlet 的部署
========================

在一个 Servlet 容器，JAX-RS 定义了多个部署选项取决于Servlet API的版本由 Servlet 容器支持。下面的部分详细描述了这些选项。

##4.7.1. Servlet 2.x Container

Jersey 结合 Servlet 容器支持至少 Servlet 2.5 规范。支持Servlet API 3.0 或者更高的容器可以运行更高的特性（特别是异步请求处理支持）和更方便和更多的灵活的部署选项。在这部分，我们注意力基本部署模型存在 Servlet 2.5 容器。

在servlet 2.5环境，你要明确声明 Jersey 在你的Web应用Servlet容器的 web.xml 部署描述符文件。

Example 4.9. 将 Jersey 当做 Servlet

	<web-app>
	    <servlet>
	        <servlet-name>MyApplication</servlet-name>
	        <servlet-class>org.glassfish.jersey.servlet.ServletContainer</servlet-class>
	        <init-param>
	            ...
	        </init-param>
	    </servlet>
	    ...
	    <servlet-mapping>
	        <servlet-name>MyApplication</servlet-name>
	        <url-pattern>/myApp/*</url-pattern>
	    </servlet-mapping>
	    ...
	</web-app>

或者，你可以注册 Jersey 容器过滤器

Example 4.10. 将 Jersey 当做 Servlet Filter

	<web-app>
	    <filter>
	        <filter-name>MyApplication</filter-name>
	        <filter-class>org.glassfish.jersey.servlet.ServletContainer</filter-class>
	        <init-param>
	            ...
	        </init-param>
	    </filter>
	    ...
	    <filter-mapping>
	        <filter-name>MyApplication</filter-name>
	        <url-pattern>/myApp/*</url-pattern>
	    </filter-mapping>
	    ...
	</web-app>

`<init-param>` 元素内容将取决于你如何决定资源配置不同的 Jersey 资源。

###4.7.1.1. 自定义 Application 子类

如果你的继承 Application 类来提供有关根资源类的列表（getresources()）和单身（getsingletons()），即你的 JAX-RS 应用模型，然后你需要注册一个 javax.ws.rs.Application [原文] 名称的初始化参数的 Servlet 或 Servlet 过滤器的 web 应用程序中的web.xml 部署描述符的使用：

Example 4.11.  配置 Jersey 容器 Servlet 或者 过滤器去自定义 Application 子类

	<init-param>
	    <param-name>javax.ws.rs.Application</param-name>
	    <param-value>org.foo.MyApplication</param-value>
	</init-param>

Jersey 将考虑所有类别的应用程序实现 getResources() 和 getSingletons() 的方法返回。

**注意**：JAX-RS 规范定义的配置名称确实是 javax.ws.rs.Application 和不是 javax.ws.rs.core.Application可想而知。